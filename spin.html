<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ - Ichancy</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(180deg, #0d1b2a 0%, #1b2838 50%, #0d1b2a 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* Ø§Ù„Ù†Ø¬ÙˆÙ… */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: twinkle 2s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        /* Ø§Ù„Ø¹Ø¬Ù„Ø© */
        .wheel-wrapper {
            position: relative;
            width: 400px;
            height: 400px;
        }

        /* Ø§Ù„Ù…Ø¤Ø´Ø± */
        .pointer {
            position: absolute;
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-top: 35px solid rgba(255, 255, 255, 0.9);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
            z-index: 200;
        }

        /* SVG Ø§Ù„Ø¹Ø¬Ù„Ø© */
        #wheelSVG {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 40px rgba(141, 213, 231, 0.5));
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .segment-text {
            fill: white;
            font-family: Arial, sans-serif;
            font-weight: bold;
            text-anchor: middle;
            pointer-events: none;
        }

        .segment-text-dark {
            fill: #1b3a52;
        }

        /* Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 75px;
            height: 75px;
            background: radial-gradient(circle, #b8c5b4 0%, #8a9d86 50%, #6b7d68 100%);
            border-radius: 50%;
            border: 6px solid #8dd5e7;
            box-shadow: 
                0 0 25px rgba(141, 213, 231, 0.6),
                inset 0 3px 12px rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            z-index: 100;
            pointer-events: none;
        }

        /* Ø§Ù„Ø²Ø± */
        .spin-button {
            padding: 18px 70px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background: transparent;
            border: 3px solid #8dd5e7;
            border-radius: 50px;
            cursor: pointer;
            text-align: center;
            box-shadow: 
                0 0 25px rgba(141, 213, 231, 0.4),
                inset 0 0 15px rgba(141, 213, 231, 0.1);
            transition: all 0.3s ease;
            min-width: 320px;
        }

        .spin-button:hover:not(:disabled) {
            background: rgba(141, 213, 231, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 0 35px rgba(141, 213, 231, 0.6);
        }

        .spin-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-box {
            padding: 22px 35px;
            background: rgba(27, 58, 82, 0.7);
            border: 3px solid #8dd5e7;
            border-radius: 18px;
            color: #fff;
            font-size: 1.3rem;
            text-align: center;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(12px);
            min-width: 320px;
        }

        .emoji {
            font-size: 2.2rem;
            margin-left: 12px;
        }

        /* Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #8dd5e7;
            animation: fall 3s linear forwards;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @media (max-width: 480px) {
            .wheel-wrapper {
                width: 340px;
                height: 340px;
            }

            .spin-button {
                min-width: 280px;
                font-size: 1.1rem;
            }

            .result-box {
                min-width: 280px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="starsContainer"></div>

    <div class="container">
        <div class="wheel-wrapper">
            <div class="pointer"></div>
            
            <svg id="wheelSVG" viewBox="0 0 400 400">
                <!-- Ø§Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© -->
                <circle cx="200" cy="200" r="198" fill="#8dd5e7" stroke="none"/>
                <circle cx="200" cy="200" r="192" fill="none" stroke="#1b3a52" stroke-width="2"/>
                
                <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù€ 8 -->
                
                <!-- 1. TELEGRAM PREMIUM (ØºØ§Ù…Ù‚) - Ø£Ø¹Ù„Ù‰ -->
                <path d="M 200 200 L 200 10 A 190 190 0 0 1 334.35 65.65 Z" fill="#1b3a52"/>
                <g>
                    <text x="200" y="68" class="segment-text" font-size="32" text-anchor="middle">â­</text>
                    <text x="200" y="88" class="segment-text" font-size="11" text-anchor="middle" letter-spacing="0.5">TELEGRAM</text>
                    <text x="200" y="103" class="segment-text" font-size="13" text-anchor="middle" letter-spacing="0.5">PREMIUM(8)</text>
                </g>
                
                <!-- 2. RESPIN (ÙØ§ØªØ­) - ÙŠÙ…ÙŠÙ† ÙÙˆÙ‚ -->
                <path d="M 200 200 L 334.35 65.65 A 190 190 0 0 1 390 200 Z" fill="#8dd5e7"/>
                <g transform="rotate(45 200 200)">
                    <text x="200" y="68" class="segment-text segment-text-dark" font-size="18" text-anchor="middle" font-weight="900" letter-spacing="0.5">RESPIN</text>
                    <text x="200" y="95" class="segment-text segment-text-dark" font-size="28" text-anchor="middle">ğŸ”„</text>
                </g>
                
                <!-- 3. 10,000 (ØºØ§Ù…Ù‚) - ÙŠÙ…ÙŠÙ† -->
                <path d="M 200 200 L 390 200 A 190 190 0 0 1 334.35 334.35 Z" fill="#1b3a52"/>
                <g transform="rotate(90 200 200)">
                    <circle cx="235" cy="85" r="11" fill="white"/>
                    <text x="235" y="91" class="segment-text segment-text-dark" font-size="13" text-anchor="middle">ğŸ’µ</text>
                    <text x="200" y="73" class="segment-text" font-size="22" text-anchor="middle" font-weight="900">10,000</text>
                    <text x="200" y="90" class="segment-text" font-size="11" text-anchor="middle">Ù„.Ø³</text>
                </g>
                
                <!-- 4. 20,000 (ÙØ§ØªØ­) - ÙŠÙ…ÙŠÙ† ØªØ­Øª -->
                <path d="M 200 200 L 334.35 334.35 A 190 190 0 0 1 200 390 Z" fill="#8dd5e7"/>
                <g transform="rotate(135 200 200)">
                    <circle cx="235" cy="85" r="11" fill="white"/>
                    <text x="235" y="91" class="segment-text segment-text-dark" font-size="13" text-anchor="middle">ğŸ’µ</text>
                    <text x="200" y="73" class="segment-text segment-text-dark" font-size="22" text-anchor="middle" font-weight="900">20,000</text>
                    <text x="200" y="90" class="segment-text segment-text-dark" font-size="11" text-anchor="middle">Ù„.Ø³</text>
                </g>
                
                <!-- 5. HARD LUCK (ØºØ§Ù…Ù‚) - ØªØ­Øª -->
                <path d="M 200 200 L 200 390 A 190 190 0 0 1 65.65 334.35 Z" fill="#1b3a52"/>
                <g transform="rotate(180 200 200)">
                    <text x="200" y="65" class="segment-text" font-size="32" text-anchor="middle">â›”</text>
                    <text x="200" y="88" class="segment-text" font-size="13" text-anchor="middle" letter-spacing="0.5">HARD</text>
                    <text x="200" y="103" class="segment-text" font-size="13" text-anchor="middle" letter-spacing="0.5">LUCK</text>
                </g>
                
                <!-- 6. 5% BONUS (ÙØ§ØªØ­) - ÙŠØ³Ø§Ø± ØªØ­Øª -->
                <path d="M 200 200 L 65.65 334.35 A 190 190 0 0 1 10 200 Z" fill="#8dd5e7"/>
                <g transform="rotate(225 200 200)">
                    <text x="200" y="73" class="segment-text segment-text-dark" font-size="28" text-anchor="middle" font-weight="900">5%</text>
                    <text x="200" y="95" class="segment-text segment-text-dark" font-size="14" text-anchor="middle" letter-spacing="0.5">BONUS</text>
                </g>
                
                <!-- 7. 000'0I (ØºØ§Ù…Ù‚) - ÙŠØ³Ø§Ø± -->
                <path d="M 200 200 L 10 200 A 190 190 0 0 1 65.65 65.65 Z" fill="#1b3a52"/>
                <g transform="rotate(270 200 200)">
                    <circle cx="165" cy="85" r="11" fill="white"/>
                    <text x="165" y="91" class="segment-text segment-text-dark" font-size="13" text-anchor="middle">ğŸ’µ</text>
                    <text x="200" y="73" class="segment-text" font-size="22" text-anchor="middle" font-weight="900">000'0I</text>
                    <text x="200" y="90" class="segment-text" font-size="11" text-anchor="middle">Ù„.Ø³</text>
                </g>
                
                <!-- 8. 10% CASH (ÙØ§ØªØ­) - ÙŠØ³Ø§Ø± ÙÙˆÙ‚ -->
                <path d="M 200 200 L 65.65 65.65 A 190 190 0 0 1 200 10 Z" fill="#8dd5e7"/>
                <g transform="rotate(315 200 200)">
                    <text x="200" y="73" class="segment-text segment-text-dark" font-size="28" text-anchor="middle" font-weight="900">10%</text>
                    <text x="200" y="95" class="segment-text segment-text-dark" font-size="14" text-anchor="middle" letter-spacing="0.5">CASH</text>
                </g>
            </svg>
            
            <div class="center-circle">â­</div>
        </div>

        <button class="spin-button" id="spinBtn" onclick="startSpin()">
            ğŸ² Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©
        </button>

        <div class="result-box" id="result">
            <span>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø¹Ø¬Ù„Ø©!</span>
        </div>
    </div>

    <script>
        // Ø§Ù„Ù†Ø¬ÙˆÙ…
        const starsContainer = document.getElementById('starsContainer');
        for (let i = 0; i < 150; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 2 + 's';
            star.style.animationDuration = (2 + Math.random() * 2) + 's';
            starsContainer.appendChild(star);
        }

        const wheel = document.getElementById('wheelSVG');
        const spinBtn = document.getElementById('spinBtn');
        const result = document.getElementById('result');
        
        let isSpinning = false;
        let hasSpun = false;

        // Ø§Ù„Ø¬ÙˆØ§Ø¦Ø²
        const prizes = [
            { name: 'Telegram Premium', type: 'premium', value: 0, emoji: 'â­' },
            { name: 'Respin', type: 'respin', value: 0, emoji: 'ğŸ”„' },
            { name: '10,000 Ù„.Ø³', type: 'balance', value: 10000, emoji: 'ğŸ’°' },
            { name: '20,000 Ù„.Ø³', type: 'balance', value: 20000, emoji: 'ğŸ’°' },
            { name: 'Hard Luck', type: 'nothing', value: 0, emoji: 'â›”' },
            { name: 'Bonus 5%', type: 'bonus', value: 5, emoji: 'ğŸ' },
            { name: '10,000 Ù„.Ø³', type: 'balance', value: 10000, emoji: 'ğŸ’°' },
            { name: '10% Cash', type: 'percentage', value: 10, emoji: 'ğŸ’°' }
        ];

        // Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª
        const weights = [3, 12, 17, 8, 30, 10, 15, 5];

        function getRandomPrize() {
            const rand = Math.random() * 100;
            let sum = 0;
            for (let i = 0; i < weights.length; i++) {
                sum += weights[i];
                if (rand <= sum) return i;
            }
            return 4;
        }

        function startSpin() {
            if (isSpinning || hasSpun) return;

            isSpinning = true;
            hasSpun = true;
            spinBtn.disabled = true;
            spinBtn.textContent = 'â³ Ø§Ù„Ø¹Ø¬Ù„Ø© ØªØ¯ÙˆØ±...';
            result.innerHTML = '<span>ğŸ¡ Ø§Ù†ØªØ¸Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©...</span>';

            const prizeIndex = getRandomPrize();
            const prize = prizes[prizeIndex];

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ©
            const segmentDegree = 360 / 8;
            const extraSpins = 5;
            const offset = (Math.random() - 0.5) * 10;
            
            const targetAngle = (prizeIndex * segmentDegree) + (segmentDegree / 2) + offset;
            const totalRotation = (360 * extraSpins) + (360 - targetAngle);

            wheel.style.transform = `rotate(${totalRotation}deg)`;

            setTimeout(() => {
                displayResult(prize);
                sendToBot(prize);
                isSpinning = false;
            }, 5200);
        }

        function displayResult(prize) {
            let msg = '';

            if (prize.type === 'nothing') {
                msg = `<span class="emoji">ğŸ˜”</span> Ø­Ø¸ Ø£ÙˆÙØ±!<br>Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰`;
                spinBtn.textContent = 'ğŸ’” Ù„Ù… ØªØ±Ø¨Ø­ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø©';
            } else if (prize.type === 'respin') {
                msg = `<span class="emoji">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Ù„ÙØ© Ø¥Ø¶Ø§ÙÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©!`;
                hasSpun = false;
                spinBtn.disabled = false;
                spinBtn.textContent = 'ğŸ”„ Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';
            } else if (prize.type === 'bonus') {
                msg = `<span class="emoji">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Ø¨ÙˆÙ†Øµ ${prize.value}% Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù†!`;
                spinBtn.textContent = 'ğŸ ØªÙ… Ø§Ù„ÙÙˆØ²!';
                launchConfetti();
            } else if (prize.type === 'percentage') {
                msg = `<span class="emoji">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>${prize.value}% Cash Ù…Ù† Ø±ØµÙŠØ¯Ùƒ!`;
                spinBtn.textContent = 'ğŸ’µ ØªÙ… Ø§Ù„ÙÙˆØ²!';
                launchConfetti();
            } else if (prize.type === 'premium') {
                msg = `<span class="emoji">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Telegram Premium!`;
                spinBtn.textContent = 'â­ ØªÙ… Ø§Ù„ÙÙˆØ²!';
                launchConfetti();
            } else if (prize.type === 'balance') {
                msg = `<span class="emoji">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Ø±Ø¨Ø­Øª ${prize.value.toLocaleString()} Ù„.Ø³!`;
                spinBtn.textContent = 'ğŸ’° ØªÙ… Ø§Ù„ÙÙˆØ²!';
                launchConfetti();
            }

            result.innerHTML = msg;
        }

        function launchConfetti() {
            for (let i = 0; i < 120; i++) {
                setTimeout(() => {
                    const conf = document.createElement('div');
                    conf.className = 'confetti';
                    conf.style.left = Math.random() * 100 + 'vw';
                    conf.style.top = '-10px';
                    conf.style.background = ['#8dd5e7', '#fff', '#ffd700', '#ff6b9d', '#4ade80'][Math.floor(Math.random() * 5)];
                    conf.style.animationDelay = Math.random() * 0.3 + 's';
                    document.body.appendChild(conf);
                    setTimeout(() => conf.remove(), 3000);
                }, i * 12);
            }
        }

        function sendToBot(prize) {
            const tg = window.Telegram.WebApp;
            tg.ready();

            const data = {
                type: 'spin',
                reward: prize.value,
                reward_type: prize.type,
                prize_name: prize.name
            };

            tg.sendData(JSON.stringify(data));
        }

        // ØªÙ‡ÙŠØ¦Ø© Telegram
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
        }
    </script>
</body>
</html>
