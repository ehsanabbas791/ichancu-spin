<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ - Ichancy</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2942 50%, #0f1f3a 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
            position: relative;
        }

        /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†Ø¬ÙˆÙ… */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(141, 213, 231, 0.5);
        }

        .subtitle {
            color: #8dd5e7;
            font-size: 1rem;
            margin-bottom: 30px;
        }

        .wheel-wrapper {
            position: relative;
            width: 360px;
            height: 360px;
            margin: 0 auto;
        }

        /* Ø§Ù„Ù…Ø¤Ø´Ø± */
        .pointer {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 18px solid transparent;
            border-right: 18px solid transparent;
            border-top: 35px solid #fff;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.4));
            z-index: 100;
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ø¬Ù„Ø© */
        .wheel-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* Ø§Ù„Ø¹Ø¬Ù„Ø© Ù†ÙØ³Ù‡Ø§ */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: 
                0 0 0 8px #8dd5e7,
                0 0 0 12px #1a3a52,
                0 0 40px rgba(141, 213, 231, 0.5);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        /* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .slice {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            overflow: hidden;
        }

        .slice-content {
            position: absolute;
            width: 200%;
            height: 200%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding-left: 25%;
            font-weight: bold;
            color: #fff;
            text-align: center;
            font-size: 0.95rem;
            line-height: 1.3;
        }

        /* Ø§Ù„Ù‚Ø³Ù… 1: 10% CASH */
        .slice:nth-child(1) {
            transform: rotate(0deg) skewY(-45deg);
        }
        .slice:nth-child(1) .slice-content {
            background: #8dd5e7;
            transform: skewY(45deg) rotate(22.5deg);
            color: #1a3a52;
        }

        /* Ø§Ù„Ù‚Ø³Ù… 2: TELEGRAM PREMIUM */
        .slice:nth-child(2) {
            transform: rotate(45deg) skewY(-45deg);
        }
        .slice:nth-child(2) .slice-content {
            background: #1a3a52;
            transform: skewY(45deg) rotate(22.5deg);
        }

        /* Ø§Ù„Ù‚Ø³Ù… 3: RESPIN */
        .slice:nth-child(3) {
            transform: rotate(90deg) skewY(-45deg);
        }
        .slice:nth-child(3) .slice-content {
            background: #8dd5e7;
            transform: skewY(45deg) rotate(22.5deg);
            color: #1a3a52;
        }

        /* Ø§Ù„Ù‚Ø³Ù… 4: 10,000 */
        .slice:nth-child(4) {
            transform: rotate(135deg) skewY(-45deg);
        }
        .slice:nth-child(4) .slice-content {
            background: #1a3a52;
            transform: skewY(45deg) rotate(22.5deg);
        }

        /* Ø§Ù„Ù‚Ø³Ù… 5: 000'0I (Hard Luck) */
        .slice:nth-child(5) {
            transform: rotate(180deg) skewY(-45deg);
        }
        .slice:nth-child(5) .slice-content {
            background: #8dd5e7;
            transform: skewY(45deg) rotate(22.5deg);
            color: #1a3a52;
        }

        /* Ø§Ù„Ù‚Ø³Ù… 6: BONUS 5% */
        .slice:nth-child(6) {
            transform: rotate(225deg) skewY(-45deg);
        }
        .slice:nth-child(6) .slice-content {
            background: #1a3a52;
            transform: skewY(45deg) rotate(22.5deg);
        }

        /* Ø§Ù„Ù‚Ø³Ù… 7: 20,000 */
        .slice:nth-child(7) {
            transform: rotate(270deg) skewY(-45deg);
        }
        .slice:nth-child(7) .slice-content {
            background: #8dd5e7;
            transform: skewY(45deg) rotate(22.5deg);
            color: #1a3a52;
        }

        /* Ø§Ù„Ù‚Ø³Ù… 8: HARD LUCK */
        .slice:nth-child(8) {
            transform: rotate(315deg) skewY(-45deg);
        }
        .slice:nth-child(8) .slice-content {
            background: #1a3a52;
            transform: skewY(45deg) rotate(22.5deg);
        }

        /* Ø§Ù„Ù†Ø¬Ù…Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
        .center-star {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70px;
            height: 70px;
            background: linear-gradient(145deg, #1a3a52, #0f1f3a);
            border-radius: 50%;
            border: 5px solid #8dd5e7;
            box-shadow: 
                0 0 20px rgba(141, 213, 231, 0.6),
                inset 0 2px 10px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            z-index: 50;
        }

        /* Ø²Ø± Ø§Ù„Ø¯ÙˆØ±Ø§Ù† */
        .spin-btn {
            margin-top: 50px;
            padding: 18px 60px;
            font-size: 1.4rem;
            font-weight: bold;
            color: #0f1f3a;
            background: linear-gradient(145deg, #8dd5e7, #6bc4db);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 
                0 8px 25px rgba(141, 213, 231, 0.5),
                inset 0 1px 0 rgba(255,255,255,0.4);
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .spin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(141, 213, 231, 0.7);
        }

        .spin-btn:active {
            transform: translateY(0);
        }

        .spin-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Ø§Ù„Ù†ØªÙŠØ¬Ø© */
        .result-box {
            margin-top: 40px;
            padding: 25px;
            background: rgba(26, 58, 82, 0.8);
            border: 3px solid #8dd5e7;
            border-radius: 20px;
            color: #fff;
            font-size: 1.3rem;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .emoji-large {
            font-size: 2.5rem;
            margin-left: 15px;
        }

        /* Ø§Ù„ÙƒÙˆÙ†ÙÙŠØªÙŠ */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            background: #8dd5e7;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @media (max-width: 480px) {
            .wheel-wrapper {
                width: 300px;
                height: 300px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .slice-content {
                font-size: 0.8rem;
                padding-left: 20%;
            }

            .spin-btn {
                padding: 15px 45px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <h1>ğŸ¡ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­Ø¸ Ichancy</h1>
        <p class="subtitle">Ø£Ø¯Ø± Ø§Ù„Ø¹Ø¬Ù„Ø© ÙˆØ§Ø±Ø¨Ø­ Ø¬ÙˆØ§Ø¦Ø² Ù…Ø°Ù‡Ù„Ø©!</p>
        
        <div class="wheel-wrapper">
            <div class="pointer"></div>
            <div class="wheel-container">
                <div class="wheel" id="wheel">
                    <!-- Ø§Ù„Ù‚Ø³Ù… 1: 10% CASH -->
                    <div class="slice">
                        <div class="slice-content">
                            <div>10%<br><b>CASH</b></div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 2: TELEGRAM PREMIUM -->
                    <div class="slice">
                        <div class="slice-content">
                            <div>â­<br><small>TELEGRAM</small><br><b>PREMIUM</b></div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 3: RESPIN -->
                    <div class="slice">
                        <div class="slice-content">
                            <div><b>RESPIN</b><br>ğŸ”„</div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 4: 10,000 -->
                    <div class="slice">
                        <div class="slice-content">
                            <div><b>10,000</b><br>ğŸ’°</div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 5: 000'0I (Ù…Ù‚Ù„ÙˆØ¨) -->
                    <div class="slice">
                        <div class="slice-content">
                            <div>ğŸ’°<br><b>000'0I</b></div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 6: BONUS 5% -->
                    <div class="slice">
                        <div class="slice-content">
                            <div><b>BONUS</b><br><small>5%</small></div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 7: 20,000 -->
                    <div class="slice">
                        <div class="slice-content">
                            <div><b>20,000</b><br>ğŸ’°</div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù‚Ø³Ù… 8: HARD LUCK -->
                    <div class="slice">
                        <div class="slice-content">
                            <div>â›”<br><small>HARD</small><br><b>LUCK</b></div>
                        </div>
                    </div>
                    
                    <!-- Ø§Ù„Ù†Ø¬Ù…Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ -->
                    <div class="center-star">â­</div>
                </div>
            </div>
        </div>

        <button class="spin-btn" id="spinBtn" onclick="spin()">
            ğŸ² Ù„Ù Ø§Ù„Ø¹Ø¬Ù„Ø©
        </button>

        <div class="result-box" id="result">
            <span>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨!</span>
        </div>
    </div>

    <script>
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø¬ÙˆÙ… Ù„Ù„Ø®Ù„ÙÙŠØ©
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const result = document.getElementById('result');
        
        let spinning = false;
        let hasSpun = false;

        // Ø§Ù„Ø¬ÙˆØ§Ø¦Ø² (Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ù…Ù† 0 Ø¥Ù„Ù‰ 7)
        const prizes = [
            { name: '10% CASH', value: 'percentage', emoji: 'ğŸ’°', amount: 10 },
            { name: 'Telegram Premium', value: 'premium', emoji: 'â­', amount: 0 },
            { name: 'Respin', value: 'respin', emoji: 'ğŸ”„', amount: 0 },
            { name: '10,000 Ø±ØµÙŠØ¯', value: 10000, emoji: 'ğŸ’°', amount: 10000 },
            { name: '10,000 Ø±ØµÙŠØ¯', value: 10000, emoji: 'ğŸ’°', amount: 10000 },
            { name: 'Bonus 5%', value: 'bonus', emoji: 'ğŸ', amount: 5 },
            { name: '20,000 Ø±ØµÙŠØ¯', value: 20000, emoji: 'ğŸ’°', amount: 20000 },
            { name: 'Hard Luck', value: 0, emoji: 'â›”', amount: 0 }
        ];

        // Ø§Ù„Ø£ÙˆØ²Ø§Ù† (Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª Ø§Ù„ÙÙˆØ²)
        const weights = [10, 5, 10, 15, 15, 10, 8, 27]; // Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ = 100

        function getRandomPrize() {
            const random = Math.random() * 100;
            let sum = 0;
            
            for (let i = 0; i < weights.length; i++) {
                sum += weights[i];
                if (random <= sum) {
                    return i;
                }
            }
            return 7; // Hard Luck ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ
        }

        function spin() {
            if (spinning || hasSpun) return;
            
            spinning = true;
            hasSpun = true;
            spinBtn.disabled = true;
            result.innerHTML = '<span>ğŸ¡ Ø§Ù„Ø¹Ø¬Ù„Ø© ØªØ¯ÙˆØ±...</span>';

            // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¬Ø§Ø¦Ø²Ø©
            const prizeIndex = getRandomPrize();
            const prize = prizes[prizeIndex];

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø²Ø§ÙˆÙŠØ©
            const degreesPerSlice = 360 / 8; // 45 Ø¯Ø±Ø¬Ø©
            const extraSpins = 5; // Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©
            const randomOffset = (Math.random() - 0.5) * 20; // Ø¥Ø¶Ø§ÙØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            
            // Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø¹ÙƒØ³ Ø¹Ù‚Ø§Ø±Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø©)
            const targetAngle = (prizeIndex * degreesPerSlice) + (degreesPerSlice / 2) + randomOffset;
            const totalRotation = (360 * extraSpins) + (360 - targetAngle);

            wheel.style.transform = `rotate(${totalRotation}deg)`;

            // Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡
            setTimeout(() => {
                showResult(prize);
                spinning = false;
                sendToBot(prize);
            }, 5000);
        }

        function showResult(prize) {
            let msg = '';
            
            if (prize.value === 0 && prize.name === 'Hard Luck') {
                msg = `<span class="emoji-large">ğŸ˜”</span> ${prize.name}<br>Ø­Ø¸ Ø£ÙˆÙØ± Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©!`;
            } else if (prize.value === 'respin') {
                msg = `<span class="emoji-large">${prize.emoji}</span> ${prize.name}!<br>Ù„ÙØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ©`;
                hasSpun = false;
                spinBtn.disabled = false;
            } else if (prize.value === 'bonus') {
                msg = `<span class="emoji-large">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Ø¨ÙˆÙ†Øµ ${prize.amount}% Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù†`;
            } else if (prize.value === 'percentage') {
                msg = `<span class="emoji-large">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>${prize.amount}% Ù…Ù† Ø±ØµÙŠØ¯Ùƒ ÙƒØ§Ø´!`;
            } else if (prize.value === 'premium') {
                msg = `<span class="emoji-large">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Telegram Premium!`;
            } else if (prize.value > 0) {
                msg = `<span class="emoji-large">${prize.emoji}</span> Ù…Ø¨Ø±ÙˆÙƒ!<br>Ø±Ø¨Ø­Øª ${prize.amount.toLocaleString()} Ø±ØµÙŠØ¯!`;
                launchConfetti();
            }
            
            result.innerHTML = msg;
        }

        function launchConfetti() {
            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const conf = document.createElement('div');
                    conf.className = 'confetti';
                    conf.style.left = Math.random() * 100 + '%';
                    conf.style.background = ['#8dd5e7', '#6bc4db', '#fff', '#ffd700'][Math.floor(Math.random() * 4)];
                    conf.style.animationDelay = Math.random() * 0.3 + 's';
                    document.body.appendChild(conf);
                    
                    setTimeout(() => conf.remove(), 3000);
                }, i * 20);
            }
        }

        function sendToBot(prize) {
            const tg = window.Telegram.WebApp;
            tg.ready();

            let rewardValue = 0;
            let rewardType = 'none';

            if (typeof prize.value === 'number' && prize.value > 0) {
                rewardValue = prize.value;
                rewardType = 'balance';
            } else if (prize.value === 'respin') {
                rewardType = 'respin';
            } else if (prize.value === 'bonus') {
                rewardType = 'bonus';
                rewardValue = prize.amount;
            } else if (prize.value === 'premium') {
                rewardType = 'premium';
            } else if (prize.value === 'percentage') {
                rewardType = 'percentage';
                rewardValue = prize.amount;
            }

            const data = {
                type: 'spin',
                reward: rewardValue,
                reward_type: rewardType,
                prize_name: prize.name
            };

            tg.sendData(JSON.stringify(data));
        }

        // ØªÙ‡ÙŠØ¦Ø© Telegram
        window.Telegram.WebApp.ready();
        window.Telegram.WebApp.expand();
    </script>
</body>
</html>
